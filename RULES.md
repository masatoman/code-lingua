# Code Lingua プロジェクトルール

## 🚨 重要なルール

### 本番化の手順
**絶対にいきなり本番化してはいけません！**

1. **必ず事前確認**
   - 機能の動作確認
   - テスト環境での検証
   - ユーザーへの事前通知

2. **段階的デプロイ**
   - 開発環境 → ステージング環境 → 本番環境
   - 各段階で十分なテスト

3. **本番化前のチェックリスト**
   - [ ] 機能テスト完了
   - [ ] エラーハンドリング確認
   - [ ] パフォーマンス確認
   - [ ] セキュリティ確認
   - [ ] ユーザーへの通知

### 開発フロー
1. **ローカル開発** (`npm run dev`)
2. **テスト・検証**
3. **ステージング環境での確認**
4. **ユーザーへの事前通知**
5. **本番デプロイ**

### 禁止事項
- ❌ いきなり本番化
- ❌ テスト不足でのデプロイ
- ❌ ユーザーへの事前通知なし
- ❌ 緊急時以外の深夜デプロイ

## 🔒 セキュリティルール

### フォーム実装時の必須事項
**フォームを実装する際は、必ず以下のセキュリティ対策を実装してください！**

1. **ボット攻撃対策**
   - [ ] Honeypotフィールド（隠しフィールド）
   - [ ] reCAPTCHA（必要に応じて）
   - [ ] タイムスタンプ検証
   - [ ] セッショントークン

2. **スパム対策**
   - [ ] レート制限（送信回数制限）
   - [ ] 入力値検証（長さ、文字種、形式）
   - [ ] スパムフィルター有効化
   - [ ] ボットフィールドチェック

3. **CSRF対策**
   - [ ] CSRFトークン
   - [ ] SameSite Cookie設定
   - [ ] リファラーチェック

4. **入力検証**
   - [ ] クライアントサイド検証
   - [ ] サーバーサイド検証
   - [ ] XSS対策（特殊文字エスケープ）
   - [ ] SQLインジェクション対策

5. **セキュリティヘッダー**
   - [ ] Content Security Policy (CSP)
   - [ ] X-Frame-Options
   - [ ] X-XSS-Protection
   - [ ] X-Content-Type-Options
   - [ ] Strict-Transport-Security

### セキュリティチェックリスト
- [ ] ボット対策フィールド実装
- [ ] レート制限実装
- [ ] 入力値検証実装
- [ ] セキュリティヘッダー設定
- [ ] スパムフィルター有効化
- [ ] エラーハンドリング実装
- [ ] ログ・監視設定

## 🔧 技術的ルール

### コード品質
- DRY, KISS, YAGNIの原則
- 適切なメソッドサイズ
- エラー処理の実装
- セキュリティ考慮

### テスト
- 機能テスト必須
- エッジケース対応
- 自動テスト実行
- セキュリティテスト

### デプロイ
- ビルド前の最終確認
- ロールバック計画の準備
- 監視・ログの確認
- セキュリティスキャン

## 📝 コミュニケーション

### 変更前
- 変更内容の説明
- 影響範囲の確認
- ユーザーへの事前通知
- セキュリティ影響の評価

### 変更後
- 変更完了の報告
- 動作確認結果
- セキュリティテスト結果
- 問題があれば即座に報告

## 🚀 今後の改善

### 実装予定
- コメント機能
- ユーザー評価機能
- 検索機能の改善
- カスタムドメイン設定

### 品質向上
- 自動テストの追加
- パフォーマンス最適化
- アクセシビリティ改善
- セキュリティ強化

### セキュリティ強化
- reCAPTCHA v3実装
- 高度なボット検出
- 機械学習ベースのスパム検出
- セキュリティ監査の定期実行
